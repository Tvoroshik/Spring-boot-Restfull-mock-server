package org.example.controllers;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class SignDocController {

    private static final Logger logger = LoggerFactory.getLogger(SignDocController.class);

    // Читаем значение задержки из application.properties
    @Value("${app.delay_SignDoc:0}")
    private long delay_SignDoc;

    @PostMapping("/signDoc")
    public String signDoc() {
        try {
            // Добавляем задержку (в миллисекундах)
            Thread.sleep(delay_SignDoc);

            // Фиксированный JSON-ответ
            String jsonResponse = "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";

            return jsonResponse;

        } catch (InterruptedException e) {
            logger.error("Error processing request", e);
            Thread.currentThread().interrupt();
            return "{\"error\": \"Error processing request\"}";
        }
    }
}